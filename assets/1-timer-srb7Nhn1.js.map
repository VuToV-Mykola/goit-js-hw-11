{"version":3,"file":"1-timer-srb7Nhn1.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["// Підключення Flatpickr та iziToast (разом зі стилями)\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Посилання на елементи інтерфейсу\nconst dateTimePicker = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('[data-start]');\nconst timerDays = document.querySelector('[data-days]');\nconst timerHours = document.querySelector('[data-hours]');\nconst timerMinutes = document.querySelector('[data-minutes]');\nconst timerSeconds = document.querySelector('[data-seconds]');\n\nconst MILLISECOND = 1;\nconst SECOND = 1000 * MILLISECOND;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\n\nlet selectedDate = null;\nlet timerId = null;\n\nif (startButton) {\n  startButton.disabled = true;\n}\n\n// Допоміжне форматування значень таймера (тільки для hours, minutes, seconds)\nconst addLeadingZero = (value) => String(value).padStart(2, '0');\n\nconst convertMs = (ms) => {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n\nconst updateTimerDisplay = ({ days, hours, minutes, seconds }) => {\n  if (timerDays) {\n    // Дні можуть мати більше двох цифр, тому не форматуємо\n    timerDays.textContent = String(days);\n  }\n  if (timerHours) {\n    timerHours.textContent = addLeadingZero(hours);\n  }\n  if (timerMinutes) {\n    timerMinutes.textContent = addLeadingZero(minutes);\n  }\n  if (timerSeconds) {\n    timerSeconds.textContent = addLeadingZero(seconds);\n  }\n};\n\nconst toggleControls = (isRunning) => {\n  if (dateTimePicker) {\n    dateTimePicker.disabled = isRunning;\n  }\n  if (startButton) {\n    startButton.disabled = isRunning;\n  }\n};\n\nconst showErrorToast = (message) => {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'topRight',\n    timeout: 2500,\n  });\n};\n\nconst handleDateSelection = (selectedDates) => {\n  if (!selectedDates.length) {\n    selectedDate = null;\n    if (startButton) {\n      startButton.disabled = true;\n    }\n    return;\n  }\n\n  const pickedDate = selectedDates[0];\n  const now = new Date();\n\n  if (pickedDate <= now) {\n    selectedDate = null;\n    if (startButton) {\n      startButton.disabled = true;\n    }\n    showErrorToast('Please choose a date in the future');\n    return;\n  }\n\n  selectedDate = pickedDate;\n  if (startButton) {\n    startButton.disabled = false;\n  }\n};\n\n// Ініціалізація Flatpickr з потрібними опціями\nif (dateTimePicker) {\n  flatpickr(dateTimePicker, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose: handleDateSelection,\n  });\n}\n\nconst startTimer = () => {\n  if (!selectedDate) {\n    return;\n  }\n\n  if (timerId) {\n    clearInterval(timerId);\n  }\n\n  toggleControls(true);\n\n  const updateTick = () => {\n    const remainingMs = selectedDate - new Date();\n\n    if (remainingMs <= 0) {\n      clearInterval(timerId);\n      timerId = null;\n      updateTimerDisplay(convertMs(0));\n      selectedDate = null;\n      if (startButton) {\n        startButton.disabled = true;\n      }\n      if (dateTimePicker) {\n        dateTimePicker.disabled = false;\n      }\n      return;\n    }\n\n    updateTimerDisplay(convertMs(remainingMs));\n  };\n\n  updateTick();\n  timerId = setInterval(updateTick, SECOND);\n};\n\nif (startButton) {\n  startButton.addEventListener('click', startTimer);\n}\n"],"names":["dateTimePicker","startButton","timerDays","timerHours","timerMinutes","timerSeconds","MILLISECOND","SECOND","selectedDate","timerId","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","updateTimerDisplay","toggleControls","isRunning","showErrorToast","message","iziToast","handleDateSelection","selectedDates","pickedDate","flatpickr","startTimer","updateTick","remainingMs"],"mappings":"gDAOA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAc,EACdC,EAAS,IAAOD,EAKtB,IAAIE,EAAe,KACfC,EAAU,KAEVR,IACFA,EAAY,SAAW,IAIzB,MAAMS,EAAkBC,GAAU,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAEzDC,EAAaC,GAAO,CAQxB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EAEMC,EAAqB,CAAC,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,IAAO,CAC5Df,IAEFA,EAAU,YAAc,OAAOY,CAAI,GAEjCX,IACFA,EAAW,YAAcO,EAAeK,CAAK,GAE3CX,IACFA,EAAa,YAAcM,EAAeM,CAAO,GAE/CX,IACFA,EAAa,YAAcK,EAAeO,CAAO,EAErD,EAEME,EAAkBC,GAAc,CAChCpB,IACFA,EAAe,SAAWoB,GAExBnB,IACFA,EAAY,SAAWmB,EAE3B,EAEMC,EAAkBC,GAAY,CAClCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,EACA,SAAU,WACV,QAAS,IACb,CAAG,CACH,EAEME,EAAuBC,GAAkB,CAC7C,GAAI,CAACA,EAAc,OAAQ,CACzBjB,EAAe,KACXP,IACFA,EAAY,SAAW,IAEzB,MACF,CAEA,MAAMyB,EAAaD,EAAc,CAAC,EAGlC,GAAIC,GAFQ,IAAI,KAEO,CACrBlB,EAAe,KACXP,IACFA,EAAY,SAAW,IAEzBoB,EAAe,oCAAoC,EACnD,MACF,CAEAb,EAAekB,EACXzB,IACFA,EAAY,SAAW,GAE3B,EAGID,GACF2B,EAAU3B,EAAgB,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASwB,CACb,CAAG,EAGH,MAAMI,EAAa,IAAM,CACvB,GAAI,CAACpB,EACH,OAGEC,GACF,cAAcA,CAAO,EAGvBU,EAAe,EAAI,EAEnB,MAAMU,EAAa,IAAM,CACvB,MAAMC,EAActB,EAAe,IAAI,KAEvC,GAAIsB,GAAe,EAAG,CACpB,cAAcrB,CAAO,EACrBA,EAAU,KACVS,EAAmBN,EAAU,CAAC,CAAC,EAC/BJ,EAAe,KACXP,IACFA,EAAY,SAAW,IAErBD,IACFA,EAAe,SAAW,IAE5B,MACF,CAEAkB,EAAmBN,EAAUkB,CAAW,CAAC,CAC3C,EAEAD,EAAU,EACVpB,EAAU,YAAYoB,EAAYtB,CAAM,CAC1C,EAEIN,GACFA,EAAY,iBAAiB,QAAS2B,CAAU"}